<!DOCTYPE html>
<HTML>
	<HEAD>
		<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
		<TITLE>microSmartHome</TITLE>
	</HEAD>
	<BODY>
		<H2>microSmartHome</H2>
        <div>
            <h3> Устройство умного дома.<br><br> Общее описание.</h3>
            <div>
                Данное устройство измеряет температуру, имеет датчик движения и определяет наличие напряжения
                в сети. Работает как от сети 220В так и от батарейного питания от3.5В до 5В
                (проще взять литиевую батарею). Модуль SIM900 обеспечивает связь по мобильной сети.
            </div>
            <span class="label">Что измеряется:</span>
            <ol> 
                <li>
                    Измеряет температуру. Где установить - там и измерит (комната, отопительный котёл,
                    теплица и т.п.)
                </li>
                <li>
                    Если подключить датчик движения, то определит количество перемещений в своей зоне
                    обнаружения.
                </li>
                <li>
                    При питании от сетевого источника определит момент исчезновения напряжения.
                </li>
            </ol>
            <span class="label">Настройки:</span>
            <ol>
                <li>
                    Назначается администратор устройства. Адмиистратор может задать ниже указанные
                    настройки и назначить ещё двух клиентов для отправки смс сообщений. Клиенты
                    только принимают сообщения. 
                </li>
                <li>
                    Устанавливается(настраивается) минимаальное значение температуры.
                </li>
                <li>
                    Задаётся реагировать или нет на движение.
                </li>
            </ol>
            <span class="label">СМС:</span>
            <ol>
                <li>
                    Если задано минимальное значение температуры, будет отправлено смс сообщение при
                    значении температуры менее установленного. Сообщение отправится администратору и
                    клиентам(если они есть).
                </li>
                <li>
                    С датчиком движения аналогично.
                </li>
                <li>
                    Если пропадёт напряжение в сети сообщение получит только администратор.
                </li>
            </ol>
            <span class="label">Голосовые вызовы(звонки):</span>
            <ol>
                <li>
                    Если позвонить на номер модуля. Он ответит какая на данный момент температура и
                    сообщит о наличии движения.
                </li>
            </ol>
            <span class="label">Отправка данных через интернет.(GPRS соединение):</span>
            <ol>
                <li>
                    Модуль может отправлять данные на серевер ThingSpeak. Для этого надо зарегистрироваться
                    и создать канал для передачи данных. 
                </li>
                <li>
                    Введите ключ записи данных сервера(WRITE_API_KEY) и презагрузите
                    модуль. После перезагрузки он начнёт передавать данные на ThingSpeak.           
                </li>
            </ol>
            <hr width="60%">
            <div>
                Назначение: отправка данных с удалённых объектов.
				<h5><u>Функционал.</u></h5>
				<ol>
					<li>Устройство можно настроить.</li>
					<li>
						При снижении температуры менее минимальной, обнаружении движения,
						исчезновении сетевого напряжения по назначенным телефонным номерам будет отправлено смс
						сообщение.
					</li>
					<li>
						При звонке, устройство передаст текущие значения параметров.
					</li>
					<li>
						Если установлено значение ключа с сервера ThingSpeak (write_api_key),
						то каждые пять минут данные будут отправляться на сервер.
					</li>
				</ol>
            </div>
        </div>
        <div>
            <h3> Подробности.</h3>
            <span class="label">
				Схема устройства:<br>				
			</span>
			<img src="sheet.png" alt="схема модуля"><br>
			<div>
				<h4>Замечания по схеме:</h4>
				<ul>
					<li>
						Диоды D1, D2 желательно взять Шоттки обратное напряжение 20В(можно больше).
						Нужны для того, чтобы не пропускать напряжение батареи к пину а0, измеряющему
						наличие напряжения на внешнем источнике. Если планируется работа только от
						батарей можно убрать диоды , сопротивление R7 и часть схемы идущую от разъёма "power", а
						пином а0, при необходимости, измерять напряжение. Для такого случая в Constants.h надо найти строку
						"#define READ_AS_ANALOG 0" и заменить 0 на 1 и всё перекомпилировать. Прочитанные значения
						будут изменяться от 0 до 255 пропорционально напряжению на пине а0(5В - 255, 0В - 0), смс
						отправляться не будут, данные на ThingSpeak будут отправляться в соответствии с настройками устройства.
						<br><u>При питании только от сети диоды тоже не нужны.</u>
					</li>
					<li>
						Если датчик движения не нужен его можно выкинуть из схемы. <b>Сопротивление R8 удалять не стоит.</b>
						Хоть пин программно подтянут к земле, но кто его знает?
					</li>
					<li>
						Транзистор Q1 - Любой mosfet low серии( открывается при напряжении менее 4В ) на ток не менее 5А. 
					</li>
					<li>
						Конденсаторы C2 - фильтр вч помех. С1 - накопительный, если стоит, то устройство сможет работать
						от сетевого источника на 5В и 0.5А без батарей.
					</li>
				</ul>
			</div>
        </div>
	</BODY>
</HTML>
















